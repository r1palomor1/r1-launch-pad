
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700&display=swap" rel="stylesheet">
    <title>R1 Launch Pad</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="mainView" class="main-view">
        <header>
            <button id="nowPlayingIcon" title="Now Playing">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>
            </button>
            <div id="logo" title="Go to Home">
                <span class="logo-text"> R1 Launch Pad</span>
                <svg class="logo-rocket" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </div>
        </header>
        <div class="search-section">
            <div class="search-input-wrapper">
                <input type="text" id="searchInput" placeholder="Search or Add..." autocomplete="off" inputmode="search">
                <button id="clearSearchBtn" title="Clear search" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
                </button>
            </div>
            <button id="searchBtn" title="Search with DuckDuckGo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z"/></svg>
            </button>
            <button id="cancelSearchBtn" class="secondary">Cancel</button>
        </div>
        <div class="actions-bar">
            <div class="list-actions">
            <button id="toggleViewBtn" class="view-btn"></button>
            <a href="#" id="toggleAllLink" style="display: none;"></a>
            <button id="quickLaunchBtn" title="Launch Favorite">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18.26l-7.053 3.948 1.575-7.928L.587 8.792l8.027-.952L12 .5l3.386 7.34 8.027.952-5.935 5.488 1.575 7.928z"></path></svg>
            </button>
        </div>
            <div class="app-actions">
                <button id="themeBtn" title="Change Theme">
                    <img src="assets/Theme-transparentT.svg" alt="Theme Icon">
                </button>
                <button id="deleteAllBtn" title="Delete All Links">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div id="cardContainer"></div>
    </div>
    
    <div id="themeDialogOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <div class="custom-prompt-title-wrapper">
                <p id="themeDialogTitle" class="custom-prompt-title">Change Theme</p>
                <div id="themeLabToggle" class="lab-toggle-wrapper" style="display: none;" title="Apply a modifier">
                    <label for="lab-checkbox">Lab</label>
                    <input type="checkbox" id="lab-checkbox" class="lab-checkbox">
                </div>
            </div>
            <p id="themeDialogError" class="custom-prompt-error"></p>
            <ul id="themeColorList" class="theme-color-list scrollable-list-dialog" tabindex="-1"></ul>
            <div class="dialog-input-wrapper">
                <input type="text" id="themeDialogInput" placeholder="e.g., 'SteelBlue' or #3498db" inputmode="text">
                <button id="clearThemeInputBtn" title="Clear color" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg></button>
            </div>
            <div class="custom-prompt-actions">
                <div class="custom-prompt-actions-left">
                    <button id="themeModeToggleBtn" class="dialog-icon-btn" title="Switch Mode"></button>
                    <button id="themeDialogReset" class="rabbit-default" title="Reset to default theme">Rabbit Me!</button>
                </div>
                <div class="custom-prompt-actions-right">
                    <button id="themeDialogCancel" class="secondary">Cancel</button>
                    <button id="themeDialogOk">OK</button>
                </div>
            </div>
        </div>
    </div>

    <div id="deletePromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <div class="delete-options">
                <label><input type="radio" name="delete-mode" value="all"> Delete All Links</label>
                <label><input type="radio" name="delete-mode" value="keep-favs"> Delete All Except Favorites</label>
                <label><input type="radio" name="delete-mode" value="selected" checked> Select Links to Delete:</label>
            </div>
            <ul id="deleteLinksList" class="delete-links-list scrollable-list-dialog" tabindex="-1">
                <!-- Links will be populated here by JS -->
            </ul>
            <div class="custom-prompt-actions">
                <button id="deletePromptCancel" class="secondary">Cancel</button>
                <button id="deletePromptOk">Delete</button>
            </div>
        </div>
    </div>

    <div id="favoritesPromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <p class="custom-prompt-title">Favorites</p>
            
            <!-- Header restore button for Favorites mode -->
            <button id="showFavoritesHeaderBtn" class="show-header-restore-btn" title="Show Favorites Controls" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 5;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <line x1="9" y1="3" x2="9" y2="21" />
                    <path d="M13 8l4 4-4 4" />
                </svg>
            </button>
            
            <ul id="favoritesList" class="favorites-list scrollable-list-dialog" tabindex="-1">
                <!-- Favorite links will be populated here by JS -->
            </ul>
            <div class="custom-prompt-actions">
                <button id="favoritesPromptClose" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <div id="genericPromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <p id="genericPromptMessage"></p>
            <div id="genericPromptActions" class="custom-prompt-actions">
                <!-- Buttons are dynamically added here by JS -->
            </div>
        </div>
    </div>

    <!-- Internal YouTube Player View -->
    <div id="internalPlayerOverlay" style="display: none;">
        <div class="player-header">
            <!-- Navigation Icons Row -->
            <div class="media-hub-nav">
                <button id="playerHomeNavBtn" class="dialog-icon-btn" title="Home">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color" ><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" ></path></svg>
                </button>
                
                <button id="playerMusicNavBtn" class="dialog-icon-btn" title="Videos">
                    <svg fill="none" width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon line-color" data-name="Line Color">
  <!-- Music note -->
  <g transform="translate(3.3, 5) scale(0.7)">
    <path d="M21.72 6.28v1.17c0 .98-.39 1.82-1.08 2.36a2.35 2.35 0 0 1-2.51.15l-5.38-1.79v9.73c0 2.62-2.13 4.75-4.75 4.75S3.22 20.62 3.22 18s2.13-4.75 4.75-4.75c1.26 0 2.41.5 3.25 1.3V4c0-1 .4-1.84 1.09-2.35.69-.49 1.61-.6 2.53-.31l4.42 1.48a3.78 3.78 0 0 1 2.46 3.46Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
  </g>
</svg>
                </button>
                
   <button id="playerPlaylistsNavBtn" class="dialog-icon-btn" title="Playlists">
  <svg fill="none" width="24px" height="24px" viewBox="0 0 24 24"
       xmlns="http://www.w3.org/2000/svg" class="icon line-color" data-name="Line Color">
       
    <!-- Horizontal lines -->
    <path d="M2 5h9M2 9h6M2 13h5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />

    <!-- Music note -->
    <g transform="translate(3.3, 5) scale(0.7)">
      <path d="M21.72 6.28v1.17c0 .98-.39 1.82-1.08 2.36a2.35 2.35 0 0 1-2.51.15l-5.38-1.79v9.73c0 2.62-2.13 4.75-4.75 4.75S3.22 20.62 3.22 18s2.13-4.75 4.75-4.75c1.26 0 2.41.5 3.25 1.3V4c0-1 .4-1.84 1.09-2.35.69-.49 1.61-.6 2.53-.31l4.42 1.48a3.78 3.78 0 0 1 2.46 3.46Z"
            stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
    </g>
  </svg>
</button>

                
                <button id="playerFavoritesNavBtn" class="dialog-icon-btn" title="Favorites">
                    <svg fill="none" width="24px" height="24px" viewBox="0 0 24 24" id="folder-favorite" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color">
                        <path id="secondary" d="M16.84,13.72l-.34.34-.34-.34a2.43,2.43,0,0,0-3.45,0,2.47,2.47,0,0,0,0,3.47l1,1L16.5,21l2.75-2.77,1-1a2.47,2.47,0,0,0,0-3.47A2.43,2.43,0,0,0,16.84,13.72Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                        <path id="primary" d="M8,18H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3H9a1,1,0,0,1,.71.29l2.41,2.42a1,1,0,0,0,.71.29H20a1,1,0,0,1,1,1V9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                    </svg>
                </button>
                
                <button id="playerSearchToggleBtn" class="dialog-icon-btn" title="Search" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color">
                        <path d="M15.7 14.3l-4.2-4.2c-0.2-0.2-0.5-0.3-0.8-0.3 0.8-1 1.3-2.4 1.3-3.8 0-3.3-2.7-6-6-6s-6 2.7-6 6 2.7 6 6 6c1.4 0 2.8-0.5 3.8-1.4 0 0.3 0 0.6 0.3 0.8l4.2 4.2c0.2 0.2 0.5 0.3 0.7 0.3s0.5-0.1 0.7-0.3c0.4-0.3 0.4-0.9 0-1.3zM6 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"  ></path></svg>
                </button>
            </div>
            
            <p id="playerVideoTitle"></p>
        </div>
        
        <div class="player-container">
            <div id="youtubePlayer"></div>
            </div>
        <div class="player-controls">
            <div id="playerSongControls" class="player-navigation">
                <div class="player-main-controls">
                    <button id="playerPlayPauseBtn" class="dialog-icon-btn"></button>
                    <button id="playerAudioOnlyBtn" class="dialog-icon-btn"></button>
                    <div class="volume-icon-container">
                        <button id="playerMuteBtn" class="dialog-icon-btn" title="Volume">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>
                        </button>
                        <div id="playerVolumePopup" class="volume-popup" style="display: none;">
                            <input type="range" id="playerVolumeSlider" min="0" max="100" value="40" class="volume-slider-vertical" title="Volume" orient="vertical" />
                            <div class="volume-level-display">40</div>
                        </div>
                    </div>
                    <button id="playerFavoriteBtn" class="dialog-icon-btn" title="Save/Unsave Video">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color" ><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /></svg>                    
                    </button>
                </div>
            </div>

            <div id="playerPlaylistControls" class="player-navigation-playlist" style="display: none;">
                <div class="playlist-controls-row">
                    <button id="playerPrevBtn" class="dialog-icon-btn" title="Previous">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color"><path d="M18 6v12l-8.5-6L18 6zM6 6v12h2V6H6z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" ></path></svg>                    
                    </button>
                    
                    <button id="playerPlayPauseBtn_playlist" class="dialog-icon-btn"></button>
                    
                    <button id="playerNextBtn" class="dialog-icon-btn" title="Next">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" ></path></svg>
                    </button>
                </div>
                <div class="playlist-controls-row">
                    <button id="playerAudioOnlyBtn_playlist" class="dialog-icon-btn"></button>
                    <div class="volume-icon-container">
                        <button id="playerMuteBtn_playlist" class="dialog-icon-btn" title="Volume">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" ></path></svg>
                        </button>
                        <div id="playerVolumePopup_playlist" class="volume-popup" style="display: none;">
                            <input type="range" id="playerVolumeSlider_playlist" min="0" max="100" value="40" class="volume-slider-vertical" title="Volume" orient="vertical" />
                            <div class="volume-level-display">40</div>
                        </div>
                    </div>
                    <button id="playerPlaylistBtn" class="dialog-icon-btn" title="View Queue">
                        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color"  xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M23,19 C23,20.1045695 22.1045695,21 21,21 L9,21 C7.8954305,21 7,20.1045695 7,19 L7,5 C7,3.8954305 7.8954305,3 9,3 L21,3 C22.1045695,3 23,3.8954305 23,5 L23,19 Z M6,20 C4.8954305,20 4,19.1045695 4,18 L4,6 C4,4.8954305 4.8954305,4 6,4 L6,20 Z M3,19 C1.8954305,19 1,18.1045695 1,17 L1,7 C1,5.8954305 1.8954305,5 3,5 L3,19 Z M21,19 L21,5 L9,5 L9,19 L21,19 Z M13,9 L17,12 L13,15 L13,9 Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5"  />
                        </svg>
                    </button>
                    <button id="playerFavoriteBtn_playlist" class="dialog-icon-btn" title="Save/Unsave Video">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" class="icon line-color" data-name="Line Color" ><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /></svg>                    
                    </button>
                </div>
            </div>
        </div>

        <div id="tapHint">
            <img src="assets/Tap_me_here.png" alt="Tap here">
            <span class="hint-text">Tap here or press side button for controls</span>
        </div>
    </div>

        <!-- === Playlist Overlay (Modular, Themeable) === -->
        <div id="playlistOverlay" style="display: none;">
            <div class="playlist-overlay-content">
                <div id="playlistVideoList" class="playlist-video-list">

                    <button id="showPlaylistHeaderBtn" title="Show Playlist Controls">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                          <line x1="9" y1="3" x2="9" y2="21" />
                          <path d="M13 8l4 4-4 4" />
                        </svg>
                    </button>
                    <div class="playlist-header">
                    <div class="playlist-controls-centered">
                        
                        <div class="playlist-video-count-wrapper" title="Current Video">
                            <svg class="playlist-count-icon" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 11.4928L7.5 14.4909L9.5 11.4928H13.5C14.053 11.4928 14.5 11.0461 14.5 10.4935V1.49935C14.5 0.946709 14.053 0.5 13.5 0.5H1.5C0.947 0.5 0.5 0.946709 0.5 1.49935V10.4935C0.5 11.0461 0.947 11.4928 1.5 11.4928H5.5Z" stroke="currentColor" stroke-width="1"/>
                            </svg>
                            <span id="playlistVideoCountText" class="playlist-count-text"></span>
                        </div>
                        <div class="playlist-action-btn" id="playlistPlayAllBtn" tabindex="0" aria-label="Play All">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
...
                                <path d="M4 18V6l8.5 6L4 18zm9.5-12v12l8.5-6-8.5-6z"/>
                            </svg>
                            <div class="playlist-action-label">Play All</div>
                        </div>
                        <div class="playlist-action-btn" id="playlistShuffleBtn" tabindex="0" aria-label="Shuffle">
                            <svg fill="currentColor" width="28" height="28" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg">
                                <path d="M .3321 40.0118 C .3321 41.5117 1.4337 42.5430 3.0977 42.5430 L 8.4415 42.5430 C 12.4727 42.5430 14.9103 41.3711 17.8165 37.9727 L 23.0899 31.8320 L 28.3399 37.9727 C 31.2462 41.3711 33.6603 42.5664 37.7618 42.5664 L 42.0508 42.5664 L 42.0508 47.7695 C 42.0508 49.0352 42.8476 49.8320 44.1604 49.8320 C 44.7229 49.8320 45.3085 49.6211 45.7304 49.2461 L 54.5898 41.9336 C 55.6679 41.0664 55.6448 39.6602 54.5898 38.7930 L 45.7304 31.4336 C 45.3085 31.0586 44.7229 30.8477 44.1604 30.8477 C 42.8476 30.8477 42.0508 31.6445 42.0508 32.9102 L 42.0508 37.4571 L 37.8790 37.4571 C 35.4649 37.4571 33.9649 36.6836 32.0430 34.4571 L 26.4415 27.9180 L 32.0430 21.4024 C 33.9649 19.1524 35.4649 18.3789 37.8790 18.3789 L 42.0508 18.3789 L 42.0508 23.0898 C 42.0508 24.3555 42.8476 25.1524 44.1604 25.1524 C 44.7229 25.1524 45.3085 24.9414 45.7304 24.5664 L 54.5898 17.2539 C 55.6679 16.3867 55.6448 15.0039 54.5898 14.1133 L 45.7304 6.7539 C 45.3085 6.3789 44.7229 6.1680 44.1604 6.1680 C 42.8476 6.1680 42.0508 6.9649 42.0508 8.2305 L 42.0508 13.2930 L 37.7618 13.2930 C 33.6603 13.2930 31.2462 14.4883 28.3399 17.8867 L 23.0899 24.0274 L 17.8165 17.8867 C 14.9103 14.4883 12.4727 13.2930 8.4415 13.2930 L 3.0977 13.2930 C 1.4337 13.2930 .3321 14.3242 .3321 15.8477 C .3321 17.3477 1.4571 18.4024 3.0977 18.4024 L 8.5352 18.4024 C 10.8087 18.4024 12.2384 19.1758 14.1368 21.4024 L 19.7384 27.9180 L 14.1368 34.4571 C 12.2149 36.6836 10.7852 37.4571 8.5352 37.4571 L 3.0977 37.4571 C 1.4571 37.4571 .3321 38.5118 .3321 40.0118 Z"/>
                            </svg>
                            <div class="playlist-action-label">Shuffle</div>
                        </div>
                        <div class="playlist-action-btn" id="closePlaylistBtn" tabindex="0" aria-label="Close Playlist">
                            <svg width="28" height="28" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24.485,7.515c-4.686-4.686-12.284-4.686-16.971,0c-4.686,4.686-4.686,12.284,0,16.971
c4.686,4.686,12.284,4.686,16.971,0C29.172,19.799,29.172,12.201,24.485,7.515z M23.071,23.071c-3.908,3.908-10.234,3.908-14.142,0
c-3.899-3.899-3.899-10.243,0-14.142c3.908-3.908,10.234-3.909,14.142,0C24.96,10.818,26,13.329,26,16
C26,18.671,24.96,21.182,23.071,23.071z M21.657,11.757L17.414,16l4.243,4.243l-1.414,1.414L16,17.414l-4.243,4.243l-1.414-1.414
L14.586,16l-4.243-4.243l1.414-1.414L16,14.586l4.243-4.243L21.657,11.757z"/>
                            </svg>
                            <div class="playlist-action-label">Close</div>
                        </div>
                    </div>
                </div>
                    
                    <div id="playlistEmptyMessage" class="playlist-empty-message" style="display: none;">
                        No videos found in this playlist.
                    </div>
                    <!-- Video cards are rendered here by JS -->
                </div>
            </div>
        </div>

    <div id="youtubeSearchViewOverlay" class="custom-prompt-overlay" style="display: none;">
    <div id="youtubeSearchView" class="youtube-search-view">
        
        <!-- Header restore button for Song/Playlist/Favorites modes -->
        <button id="showSearchHeaderBtn" class="show-header-restore-btn" title="Show Search Controls" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 5;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <line x1="9" y1="3" x2="9" y2="21" />
                <path d="M13 8l4 4-4 4" />
            </svg>
        </button>
        
        <div class="search-input-wrapper">
            <div style="position: relative; flex: 1;">
                <input type="text" id="youtubeSearchInput" placeholder="Search YouTube..." autocomplete="off" inputmode="search">
                <button id="clearYoutubeSearchBtn" title="Clear search" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
                </button>
            </div>
            <button id="youtubeSearchCancelBtn" class="secondary">Cancel</button>
        </div>

        <div class="search-controls-row">
    <div class="search-mode-selector">
    <label class="radio-label">
        <input type="radio" name="searchMode" id="searchModeVideos" value="videos" checked="">
        <span>Songs</span>
    </label>
    <label class="radio-label">
        <input type="radio" name="searchMode" id="searchModePlaylists" value="playlists">
        <span>Playlists</span>
    </label>
    <label class="radio-label">
         <input type="radio" name="searchMode" id="searchModeIsGd" value="isGd">
         <span>Favorites</span>
         <svg id="isGdInfoBtn" class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path>
         </svg>
     </label>
</div>
</div>

        <div id="youtubeSearchResultsContainer" class="scrollable-list-dialog"></div>
        <div id="youtubeSearchLoader" style="display: none;">Loading...</div>
    </div>

    </div>
    
        <div id="nowPlayingBar" style="display: none;">
        <svg id="nowPlayingBarIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>
        <span class="now-playing-text">Now Playing:</span>
        <span id="nowPlayingTitle"></span>
        <button id="stopPlayingBtn" class="stop-playing-btn" title="Stop Playing">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path>
            </svg>
        </button>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="theme-engine.js"></script>
    <script src="script.js"></script>
</body>
</html>