<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700&display=swap" rel="stylesheet">
    <title>R1 Launch Pad</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="mainView" class="main-view">
        <header>
            <div id="logo" title="Go to Home">
                <span class="logo-text"> R1 Launch Pad</span>
                <svg class="logo-rocket" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </div>
        </header>
        <div class="search-section">
            <div class="search-input-wrapper">
                <input type="text" id="searchInput" placeholder="Search or Add..." autocomplete="off" inputmode="search">
                <button id="clearSearchBtn" title="Clear search" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
                </button>
            </div>
            <button id="searchBtn" title="Search with DuckDuckGo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z"/></svg>
            </button>
            <button id="cancelSearchBtn" class="secondary">Cancel</button>
        </div>
        <div class="actions-bar">
            <div class="list-actions">
            <button id="toggleViewBtn" class="view-btn"></button>
            <a href="#" id="toggleAllLink" style="display: none;"></a>
            <button id="quickLaunchBtn" title="Launch Favorite">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18.26l-7.053 3.948 1.575-7.928L.587 8.792l8.027-.952L12 .5l3.386 7.34 8.027.952-5.935 5.488 1.575 7.928z"></path></svg>
            </button>
        </div>
            <div class="app-actions">
                <button id="themeBtn" title="Change Theme">
                    <img src="Theme-transparentT.svg" alt="Theme Icon">
                </button>
                <button id="deleteAllBtn" title="Delete All Links">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div id="cardContainer"></div>
    </div>
    
    <div id="themeDialogOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <div class="custom-prompt-title-wrapper">
                <p id="themeDialogTitle" class="custom-prompt-title">Change Theme</p>
                <div id="themeLabToggle" class="lab-toggle-wrapper" style="display: none;" title="Apply a modifier">
                    <label for="lab-checkbox">Lab</label>
                    <input type="checkbox" id="lab-checkbox" class="lab-checkbox">
                </div>
            </div>
            <p id="themeDialogError" class="custom-prompt-error"></p>
            <ul id="themeColorList" class="theme-color-list scrollable-list-dialog" tabindex="-1"></ul>
            <div class="dialog-input-wrapper">
                <input type="text" id="themeDialogInput" placeholder="e.g., 'SteelBlue' or #3498db" inputmode="text">
                <button id="clearThemeInputBtn" title="Clear color" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg></button>
            </div>
            <div class="custom-prompt-actions">
                <div class="custom-prompt-actions-left">
                    <button id="themeModeToggleBtn" class="dialog-icon-btn" title="Switch Mode"></button>
                    <button id="themeDialogReset" class="rabbit-default" title="Reset to default theme">Rabbit Me!</button>
                </div>
                <div class="custom-prompt-actions-right">
                    <button id="themeDialogCancel" class="secondary">Cancel</button>
                    <button id="themeDialogOk">OK</button>
                </div>
            </div>
        </div>
    </div>

    <div id="deletePromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <div class="delete-options">
                <label><input type="radio" name="delete-mode" value="all"> Delete All Links</label>
                <label><input type="radio" name="delete-mode" value="keep-favs"> Delete All Except Favorites</label>
                <label><input type="radio" name="delete-mode" value="selected" checked> Select Links to Delete:</label>
            </div>
            <ul id="deleteLinksList" class="delete-links-list scrollable-list-dialog" tabindex="-1">
                <!-- Links will be populated here by JS -->
            </ul>
            <div class="custom-prompt-actions">
                <button id="deletePromptCancel" class="secondary">Cancel</button>
                <button id="deletePromptOk">Delete</button>
            </div>
        </div>
    </div>

    <div id="favoritesPromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <p class="custom-prompt-title">Favorites</p>
            <ul id="favoritesList" class="favorites-list scrollable-list-dialog" tabindex="-1">
                <!-- Favorite links will be populated here by JS -->
            </ul>
            <div class="custom-prompt-actions">
                <button id="favoritesPromptClose" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <div id="genericPromptOverlay" class="custom-prompt-overlay" style="display: none;">
        <div class="custom-prompt-dialog">
            <p id="genericPromptMessage"></p>
            <div id="genericPromptActions" class="custom-prompt-actions">
                <!-- Buttons are dynamically added here by JS -->
            </div>
        </div>
    </div>

    <!-- Internal YouTube Player View -->
    <div id="internalPlayerOverlay" style="display: none;">
        <div class="player-header">
            <p id="playerVideoTitle"></p>
        </div>
        <div class="player-container">
            <div id="youtubePlayer"></div>
            <!-- This div will act as a "click shield" to prevent external launches -->
        </div>
        <div class="player-controls">
            <div class="player-navigation">
                <button id="playerBackBtn" class="secondary">Back</button>
                <button id="playerPlayPauseBtn" class="dialog-icon-btn"></button>
                <button id="playerAudioOnlyBtn" class="dialog-icon-btn"></button>
                <button id="playerSearchBtn" class="secondary">Search</button>
            </div>
        </div>
    </div>

    <!-- YouTube Internal Search View -->
    <div id="youtubeSearchViewOverlay" class="custom-prompt-overlay" style="display: none;">
    <div id="youtubeSearchView" class="youtube-search-view">
        <div class="search-input-wrapper">
            <input type="text" id="youtubeSearchInput" placeholder="Search YouTube..." autocomplete="off" inputmode="search">
            <button id="clearYoutubeSearchBtn" title="Clear search" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
            </button>
        </div>

        <div class="search-mode-selector">
            <button id="searchModeVideos" class="search-mode-btn active">Videos</button>
            <button id="searchModePlaylists" class="search-mode-btn">Playlists</button>
        </div>
        
        <div class="custom-prompt-actions">
            <button id="youtubeSearchCancelBtn" class="secondary">Cancel</button>
            <button id="youtubeSearchGoBtn">Search</button>
        </div>

        <div id="youtubeSearchResultsContainer" class="scrollable-list-dialog"></div>
        <div id="youtubeSearchLoader" style="display: none;">Loading...</div>
    </div>

    </div>
    
    <div id="nowPlayingBar" style="display: none;">
        <span class="now-playing-text">Now Playing:</span>
        <span id="nowPlayingTitle"></span>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="theme-engine.js"></script>
    <script src="script.js"></script>
</body>
</html>